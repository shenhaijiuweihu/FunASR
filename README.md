# 视频字幕提取与智能分析服务 (Video Transcript & Analysis Service)

## 📖 项目简介

这是一个功能强大的后端服务，旨在自动化处理在线视频，实现从视频链接到深度内容分析的全流程。服务能够从各类视频网站（如YouTube, Bilibili等）提取内容，通过先进的AI模型进行语音转文字，并利用大型语言模型（LLM）生成结构化的视频摘要、时间轴和关键看点。

本项目为需要快速理解和二次加工视频内容的用户、开发者和内容创作者提供了高效、精准的解决方案。

---

## ✨ 功能特性

- **🔗 多平台视频支持**: 基于 `yt-dlp` 和 `lux`，支持广泛的视频平台。
- **🔊 智能语音转文字 (ASR)**:
    - 优先尝试获取视频自带字幕，实现零成本、最高精度的提取。
    - 当无字幕时，自动下载音频并通过 **FunASR** 模型进行高精度语音识别。
- **🧠 AI 深度分析**:
    - 利用**通义千问 (Qwen)** 大语言模型对字幕文本进行深度分析。
    - 生成结构化的JSON格式输出，包含：
        - **章节划分 (Time Segments)**: 智能划分视频章节，并生成各章节标题和详细内容梗概。
        - **关键时刻 (Key Moments)**: 自动高亮视频中的重要时间点和事件。
        - **高级分析模式**: 提供内容结构、话题转换、观看指南等更深层次的分析。
- **🚀 高效稳定**:
    - 内置重试机制和最终保障逻辑，确保在API调用失败时也能提供基础摘要。
    - 支持长视频处理，并设有可配置的时长和文本长度限制。
- **🌐 Web 服务接口**:
    - 提供简单易用的 RESTful API，方便与前端或其他服务集成。
    - 包含健康检查接口，便于监控服务状态。
- **🔄 自动更新**: 后台线程自动定期更新 `yt-dlp`，确保对各视频网站的兼容性。

---

## 🛠️ 技术栈

- **Web框架**: Flask
- **WSGI服务器**: Gunicorn
- **语音识别 (ASR)**: FunASR (支持多种模型，可配置)
- **大语言模型 (LLM)**: 阿里云通义千问 (Qwen)
- **深度学习框架**: PyTorch
- **视频/音频处理**: yt-dlp, lux, FFmpeg
- **核心库**: requests, tqdm

---
